/* 自定义字体导入 */
@font-face {
  font-family: '汉字拼音体';
  src: url('./汉字拼音体.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
}

/* Tailwind 配置 - 实际使用时应放入tailwind.config.js */

/* 工具类 */
.text-shadow {
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}
.glass-effect {
  background: rgba(255, 255, 255, 0.7);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
}
.highlight {
  background-color: rgba(255, 240, 0, 0.3);
  padding: 0 2px;
  border-radius: 2px;
}
.card-transition {
  transition: all 0.2s ease-in-out;
}
.card-transition:hover {
  transform: translateY(-2px);
}

/* 全局样式 */
html, body {
  height: 100%;
  -webkit-overflow-scrolling: touch; /* iOS流畅滚动 */
}

/* 定义CSS变量用于动态高度 */
:root {
  --safe-area-inset-top: env(safe-area-inset-top);
  --safe-area-inset-bottom: env(safe-area-inset-bottom);
  --available-height: 100vh;
}

/* 全局防止iOS橡皮筋效果，但保留编辑器滚动功能 */
html, body {
  overscroll-behavior: none;
  position: fixed;
  width: 100%;
  height: 100%;
}

/* 确保编辑器可以滚动 */
#memo-editor {
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
}

/* 检测并设置安全区域 */
@supports (padding: env(safe-area-inset-top)) {
  :root {
    --safe-area-inset-top: env(safe-area-inset-top);
    --safe-area-inset-bottom: env(safe-area-inset-bottom);
  }
}

/* 搜索结果列表 */
#search-results-list {
  flex: 1;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  background-color: #f5f5f5;
  border-radius: 8px;
  margin-top: 8px;
  padding: 8px;
  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
  position: relative;
  height: 200px;
  max-height: 200px;
}

#search-results-page {
  height: 50vh;
  max-height: 50vh;
  display: flex;
  flex-direction: column;
}

#search-results-search-box {
  flex: 0 0 auto;
}

#search-results-list {
  flex: 1 1 auto;
  max-height: none;
}

/* 减少搜索结果项之间的间距 */
#search-results-list > div {
  margin-bottom: 4px !important;
  padding: 8px !important; /* 减少内边距从16px到8px */
}

#search-results-list > div:last-child {
  margin-bottom: 0 !important;
}

/* 减少搜索结果项内部的行间距 */
#search-results-list h3 {
  margin-bottom: 2px !important; /* 减少地址标题的下边距 */
}

#search-results-list .text-sm {
  margin-top: 2px !important; /* 减少备注的上边距 */
}

#search-results-list p {
  margin-bottom: 1px !important; /* 减少备注行之间的间距 */
}

#search-results-list p:last-child {
  margin-bottom: 0 !important;
}

/* 自定义滚动条 */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: #f1f1f1;
  border-radius: 10px;
}

::-webkit-scrollbar-thumb {
  background: #c1c1c1;
  border-radius: 10px;
}

::-webkit-scrollbar-thumb:hover {
  background: #a8a8a8;
}

/* iOS 样式输入框 */
input[type="text"] {
  border-radius: 8px;
  border: 1px solid #e5e7eb;
  padding: 10px 12px;
  font-size: 16px;
  transition: border-color 0.2s;
}

input[type="text"]:focus {
  border-color: #007AFF;
  outline: none;
  box-shadow: 0 0 0 2px rgba(0, 122, 255, 0.2);
}

/* 底部安全区域适配 */
.safe-area-bottom {
  padding-bottom: constant(safe-area-inset-bottom);
  padding-bottom: env(safe-area-inset-bottom);
}

/* 顶部安全区域适配 */
.safe-area-top {
  padding-top: constant(safe-area-inset-top);
  padding-top: env(safe-area-inset-top);
}

/* iOS设备媒体查询 */
@media screen and (max-width: 768px) {
  /* 适配小屏幕设备 */
  .ios-button {
    min-width: 44px;
    min-height: 44px;
    /* iOS风格按钮效果 */
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
  }
  
  /* 优化文本大小 */
  h1.text-xl {
    font-size: 1.375rem;
  }
  
  /* 优化文本框间距和尺寸 */
  textarea#memo-editor {
    min-height: 300px;
    font-size: 16px; /* 防止iOS缩放 */
  }
  
  /* 增加交互元素间距 */
  .flex.space-x-4 {
    gap: 1rem;
  }
}

/* iOS设备特殊优化 */
@media screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3),
       screen and (device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3),
       screen and (device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3),
       screen and (device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) {
  
  /* 适配iPhone X及以上刘海屏设备 */
  header {
    padding-top: calc(1rem + env(safe-area-inset-top));
  }
  
  footer {
    padding-bottom: calc(1rem + env(safe-area-inset-bottom));
    padding-top: 1rem;
    /* 固定底部位置 */
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    z-index: 100;
  }
  
  /* 确保输入框不会被键盘遮挡 */
  .keyboard-avoidance {
    padding-bottom: 150px; /* 增加底部内边距 */
  }
  
  /* 优化弹窗位置 */
  #file-popup, #confirm-popup {
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
  }
  
  /* iOS风格输入框 */
  .ios-input {
    font-size: 16px; /* 防止iOS缩放 */
    padding: 12px;
    border-radius: 12px;
  }
  
  /* iOS风格底部栏 */
  .ios-footer {
    border-top-left-radius: 20px;
    border-top-right-radius: 20px;
    box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
  }
}
